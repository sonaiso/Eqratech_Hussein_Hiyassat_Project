# ุงูุชูุงูู: ูุธุฑูุฉ ุงูููุธ ุงูููุฑุฏ + ูุธุฑูุฉ ุงูุชุฑููุจ
## Integration: Phonological Theory + Syntactic Theory

[![Theory Status](https://img.shields.io/badge/phonology-complete-success)](src/theory/)
[![Syntax Status](https://img.shields.io/badge/syntax-complete-success)](src/syntax_theory/)
[![Integration](https://img.shields.io/badge/integration-ready-blue)](.)

> **"ูู ููุธ ููู ุฌููุฉ = ูุงุชุฌ arg min E"**

---

## ๐ฏ ุงูุฑุคูุฉ ุงูููุญุฏุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   arg min E (ุงูููุญุฏ)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                             โ
โ  ุงููุณุชูู 1: ุงูููุธ ุงูููุฑุฏ (Phonology)                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                          โ
โ  V* = arg min E_syll(V | C_L, C_R, flags)                  โ
โ                                                             โ
โ  โข ูู ุตูุช = ูุชูุฌุฉ ุชุญุณูู                                     โ
โ  โข ุชูุฎูู/ุงุณุชุนูุงุก ูู ุงูุญูุงุฒ ุงููุชุฑูุฉ                          โ
โ  โข ุจุฑุงููู: ูุฌูุฏุ ูุญุฏุงููุฉุ ุงูุญูุงุฒ                           โ
โ                                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                             โ
โ  ุงููุณุชูู 2: ุงูุชุฑููุจ (Syntax)                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโ                                 โ
โ  y* = arg min E_syn(y | x)                                 โ
โ                                                             โ
โ  โข ูู ุนูุงูุฉ ุชุฑููุจูุฉ = ูุชูุฌุฉ ุชุญุณูู                           โ
โ  โข ISN/TADMN/TAQYID ูู ุฅุดุจุงุน ุงููุชุญุงุช                       โ
โ  โข ุจุฑุงููู: ุงุฎุชูุงุฑ ุงูุนูุงูุงุชุ ุงููุจูู/ุงููุนุฑุจ                  โ
โ                                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ููุงุท ุงูุชูุงูู

### 1. **E_phono ุฏุงุฎู E_syn**

```python
# ูู src/syntax_theory/minimizers/syntactic_energy.py

def compute(self, y: SyntacticGraph, x: SyntacticInput) -> float:
    # ...
    
    # 7. ูููุฉ ุงูููุธ (ูู ูุธุงู ุงูููุธ ุงูููุฑุฏ)
    e_phono = 0.0
    
    for token in y.get_tokens():
        # ููู ุชูููุ ุงุญุณุจ E_token ุจุงุณุชุฎุฏุงู ูุธุฑูุฉ ุงูููุธ
        from theory.minimizers import SyllableEnergy
        
        syllable_energy = SyllableEnergy()
        # ุงุณุชุฎุฑุงุฌ C_L, C_R ูู ุงูุชููู
        # ุญุณุงุจ V* = arg min E_syll
        # ุฅุถุงูุฉ E_syll ุฅูู e_phono
        pass  # ุณูุชู ุงูุชูููุฐ
    
    # 8. ูููุฉ ุงูุญุฏูุฏ (ูุง ูุจูู ููุง ุจุนุฏู)
    e_boundary = 0.0
    
    for i in range(len(y.get_tokens()) - 1):
        t1 = y.get_tokens()[i]
        t2 = y.get_tokens()[i+1]
        
        # ุญุณุงุจ ูููุฉ ุงูุชูุงุก ุงูุณุงููููุ ุงูุฅุฏุบุงูุ ุฅูุฎ
        # ุจุงุณุชุฎุฏุงู ููุงุนุฏ ุงูููุทุนูุฉ ูู src/theory/
        pass  # ุณูุชู ุงูุชูููุฐ
    
    # ุงููููุฉ ุงููููุฉ
    total = e_rel + e_gov + e_case + e_built + e_roles + e_phono + e_boundary + e_simp
    
    return total
```

### 2. **ุชูููุฏ L ูู ุงููุญุฑูุงุช**

```python
# ูู src/syntax_theory/structures/input_structure.py

def generate_lexical_atoms_from_engines(root: str, pattern: str) -> List[LexicalAtom]:
    """
    ุชูููุฏ ูุญุฏุงุช ูุนุฌููุฉ ูู ุงููุญุฑูุงุช 66
    
    Args:
        root: ุงูุฌุฐุฑ (ู-ุช-ุจ)
        pattern: ุงููุฒู (ููุนูููุ ูุงุนูู...)
    
    Returns:
        ูุงุฆูุฉ LexicalAtom ูุน ุฃูุฏุงู ุตุฑููุฉ/ุตูุชูุฉ
    """
    from engines.morphology import VerbsEngine, ActiveParticipleEngine
    
    atoms = []
    
    # ูุซุงู: ุชูููุฏ ูุนู
    verb_data = VerbsEngine.generate_verb(root, pattern)
    atom = LexicalAtom(
        atom_type=LexicalType.V,
        raw_material=verb_data['form'],
        morphological_target={'pattern': pattern, 'root': root},
        valency=VerbValency.TRANSITIVE  # ูู ุจูุงูุงุช ุงููุญุฑู
    )
    atoms.append(atom)
    
    return atoms
```

### 3. **ุงููููุดุฆ ุงููุชูุงูู**

```python
# ููู ุฌุฏูุฏ: src/integrated_generator.py

from theory import VowelOptimizer, SyllableEnergy
from syntax_theory import CanonicalConstructor, SyntacticOptimizer

class IntegratedGenerator:
    """
    ููููุฏ ูุชูุงูู: ุฌุฐุฑ โ ุฌููุฉ ูุงููุฉ
    
    ุงููุณุงุฑ:
    1. ุฌุฐุฑ (ู-ุช-ุจ) + ูุฒู (ููุนููู)
    2. ุชูููุฏ ุตูุชู (arg min E_syll) ููู ููุทุน
    3. ุจูุงุก ูุญุฏุงุช ูุนุฌููุฉ (L)
    4. ุจูุงุก ุชุฑููุจ (arg min E_syn)
    5. ุฌููุฉ ูุงููุฉ
    """
    
    def __init__(self):
        self.vowel_optimizer = VowelOptimizer()
        self.syllable_energy = SyllableEnergy()
        self.syntactic_optimizer = SyntacticOptimizer()
    
    def generate_sentence(self, roots: List[str], patterns: List[str],
                         syntax_intent: Dict) -> str:
        """
        ุชูููุฏ ุฌููุฉ ูุงููุฉ ูู ุฌุฐูุฑ ูุฃูุฒุงู
        
        Args:
            roots: ['ู-ุช-ุจ', 'ุฃ-ุญ-ู-ุฏ']
            patterns: ['ููุนููู', 'ูุงุนูู']
            syntax_intent: {'sentence_type': 'verbal', 'transitivity': True}
        
        Returns:
            "ููุชูุจู ุฃูุญูููุฏู ุงูุฑููุณูุงููุฉู"
        """
        # ุงููุฑุญูุฉ 1: ุชูููุฏ ุงูุฃููุงุธ (Phonology)
        tokens = []
        for root, pattern in zip(roots, patterns):
            # ุชุทุจูู ูุธุงู ุงูููุธ ุงูููุฑุฏ
            syllables = self._segment_pattern(pattern)
            phonetic_form = ""
            
            for syll in syllables:
                C_L, C_R = self._extract_consonants(syll, root)
                # V* = arg min E_syll
                V_star = self.vowel_optimizer.solve_closed_form(C_L, C_R, flags={})
                phonetic_form += self._format_syllable(C_L, V_star, C_R)
            
            tokens.append(phonetic_form)
        
        # ุงููุฑุญูุฉ 2: ุจูุงุก ุงูุชุฑููุจ (Syntax)
        from syntax_theory import make_simple_input
        
        # ุชุญููู tokens ุฅูู SyntacticInput
        x = self._tokens_to_input(tokens, syntax_intent)
        
        # y* = arg min E_syn
        y0 = CanonicalConstructor.construct(x)
        candidates = [y0]  # ูุจุณูุท
        y_star = self.syntactic_optimizer.solve(x, candidates)
        
        # ุงููุฑุญูุฉ 3: ุชุทุจูู ุงูุฅุนุฑุงุจ ูุงูุชุดููู ุงูููุงุฆู
        sentence = self._render_sentence(y_star)
        
        return sentence
    
    def _segment_pattern(self, pattern: str) -> List[str]:
        # ุชูุณูู ุงููุฒู ุฅูู ููุงุทุน (CV, CVC, etc.)
        pass
    
    def _extract_consonants(self, syllable: str, root: str) -> tuple:
        # ุงุณุชุฎุฑุงุฌ C_L, C_R ูู ุงูููุทุน ูุงูุฌุฐุฑ
        pass
    
    def _format_syllable(self, C_L, V, C_R) -> str:
        # ุชูุณูู ุงูููุทุน: C_L + V + C_R
        pass
    
    def _tokens_to_input(self, tokens: List[str], intent: Dict) -> 'SyntacticInput':
        # ุชุญููู tokens ุฅูู SyntacticInput ูุน ุงููููุฏ
        pass
    
    def _render_sentence(self, y: 'SyntacticGraph') -> str:
        # ุชุญููู ุงูุฑุณู ุงูุจูุงูู ุฅูู ูุต ููุงุฆู ูุน ุงูุชุดููู
        pass
```

---

## ๐ ููุงุฑูุฉ ุงููุธุฑูุชูู

| ุงูุฌุงูุจ | ูุธุฑูุฉ ุงูููุธ ุงูููุฑุฏ | ูุธุฑูุฉ ุงูุชุฑููุจ |
|-------|-------------------|----------------|
| **ุงููุณุชูู** | ุตูุชูุงุช (Layer 1) | ุชุฑููุจ (Layer 4) |
| **ุงููุฏุฎู** | C_L, C_R, flags | L, T, I, B |
| **ุงููุฎุฑุฌ** | V* (ุตูุช) | y* (ุฑุณู ุจูุงูู) |
| **ุงูุฏุงูุฉ** | E_syll(V) | E_syn(y) |
| **ุงููุชุบูุฑุงุช** | V โ F_V (โยฒ) | case/mood, ุนูุงูุงุช |
| **ุงูุจูุงุจุงุช** | F_V ูุซูุซุ barriers | Typing, Anchor, Gov |
| **ุงูุจุฑุงููู** | 3 (ูุฌูุฏุ ูุญุฏุงููุฉุ ุชูุฎูู) | 5 (ISN, TADMN, ุงููุจูู/ุงููุนุฑุจ...) |
| **ุงููููุงุช** | 9 (~1500 ุณุทุฑ) | 15 (~3000 ุณุทุฑ) |
| **ุงูุงุฎุชุจุงุฑุงุช** | 7/7 โ | 7/7 โ |

---

## ๐ฏ ูุซุงู ูุชูุงูู

### ุงููุฏู
ุชูููุฏ: **"ููุชูุจู ุฃูุญูููุฏู ุงูุฑููุณูุงููุฉู"**

### ุงููุณุงุฑ ุงููุงูู

#### 1. ุงููุฏุฎูุงุช
```python
roots = ["ู-ุช-ุจ", "ุฃ-ุญ-ู-ุฏ", "ุฑ-ุณ-ู"]
patterns = ["ููุนููู", "ูุงุนูู", "ููุนุงูุฉ"]
intent = {
    'sentence_type': 'verbal',
    'verb_valency': 'transitive'
}
```

#### 2. ุงููุฑุญูุฉ ุงูุตูุชูุฉ (ููู ุฌุฐุฑ)
```python
# "ููุชูุจู" ูู ู-ุช-ุจ + ููุนููู
# ุงูููุทุน 1: /ka/ = CVC
C_L = consonant_space.point("ู")  # [-0.3, -0.2]
C_R = consonant_space.point("ุช")  # [-0.1, 0.1]

# V* = arg min E_syll
V_star = vowel_optimizer.solve(C_L, C_R, flags={})
# V* = [0.1, 0.3] โ "a" (ูุชุญุฉ)

# ุงูููุทุน 2: /ta/ = CVC
# ููุณ ุงูุนูููุฉ...

# ุงููุชูุฌุฉ: "ููุชูุจู"
```

#### 3. ุงููุฑุญูุฉ ุงูุชุฑููุจูุฉ
```python
# ุจูุงุก x
x = make_simple_input(
    verbs=["ูุชุจ"],
    nouns=["ุฃุญูุฏ", "ุงูุฑุณุงูุฉ"]
)
x.L[0].valency = VerbValency.TRANSITIVE

# yโ = Canon(x)
y0 = CanonicalConstructor.construct(x)
# Graph(ISN=1, TADMN=1)

# y* = arg min E_syn
y_star = optimizer.solve(x, [y0])

# ุงูุจููุฉ:
#   ISN(ูุชุจ โ ุฃุญูุฏ)      # ุงููุงุนู: NOM
#   TADMN(ูุชุจ โ ุงูุฑุณุงูุฉ)  # ุงูููุนูู: ACC
```

#### 4. ุงูุชุดููู ุงูููุงุฆู
```python
# ุชุทุจูู ุงูุฅุนุฑุงุจ ูู y_star
sentence = render_with_case(y_star)
# "ููุชูุจู ุฃูุญูููุฏู ุงูุฑููุณูุงููุฉู"
#        โฌ     โฌ         โฌ
#     (ูุนู) (NOM)    (ACC)
```

---

## ๐ฌ ุงูุจุฑุงููู ุงููุดุชุฑูุฉ

### ุงูุจุฑูุงู ุงูููุญุฏ
```
ุงููุจุฑููุฉ (Unified Generation):

ูุฃู ุฌุฐุฑ R ูุฃู ูุฒู P ูุฃู ูุตุฏ ุชุฑููุจู I:
  ููุฌุฏ ุฌููุฉ S* ูุญูุฏุฉ ุจุงูุดุฑูุท:
  
  1. ูู ููุทุน ูู S* ูุงุชุฌ arg min E_syll
  2. ุงูุจููุฉ ุงูุชุฑููุจูุฉ ููS* ูุงุชุฌุฉ arg min E_syn
  3. S* ุชุดุจุน ุฌููุน ุงููููุฏ ุงูุตูุชูุฉ ูุงูุชุฑููุจูุฉ
  
ุงูุจุฑูุงู:
  1. ููู ููุทุน: ูุจุฑููุฉ ุงููุฌูุฏ ูุงููุญุฏุงููุฉ (ูุธุฑูุฉ ุงูููุธ) โ
  2. ููุจููุฉ ุงููููุฉ: ูุจุฑููุฉ ุงูุงุฎุชูุงุฑ ุงูุจูููู (ูุธุฑูุฉ ุงูุชุฑููุจ) โ
  3. ุงูุชูุงูู: E_total = E_phono + E_syn ูุญุฏุจ ุจููุฉ
  โด ููุฌุฏ S* ูุญูุฏ = arg min E_total
```

---

## ๐ ุฎุงุฑุทุฉ ุงูุทุฑูู ููุชูุงูู ุงููุงูู

### ุงููุฑุญูุฉ 1: ุงูุฑุจุท ุงูุฃุณุงุณู โ
- [x] ูุธุฑูุฉ ุงูููุธ ุงูููุฑุฏ
- [x] ูุธุฑูุฉ ุงูุชุฑููุจ
- [x] ุชูุซูู ููุงุท ุงูุชูุงูู

### ุงููุฑุญูุฉ 2: ุงูุชูููุฐ ุงููุชูุงูู (ุงูุชุงููุฉ)
- [ ] ุชุถููู E_phono ูู E_syn
- [ ] ุชูููุฏ L ูู ุงููุญุฑูุงุช 66
- [ ] ุงููููุดุฆ ุงููุชูุงูู (IntegratedGenerator)
- [ ] ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู
- [ ] ุฃูุซูุฉ ูู ุฌุฐุฑ ุฅูู ุฌููุฉ

### ุงููุฑุญูุฉ 3: ุงูุฃุณููุจ ูุงูููุงู (ุงููุณุชูุจู)
- [ ] ูุธุฑูุฉ ุงูุฃุณููุจ (E_rhetoric)
- [ ] ูุธุฑูุฉ ุงูููุงู (E_context)
- [ ] ุงูุชูุงูู ุงูุซูุงุซู (phono + syn + rhetoric)
- [ ] ุงูุชุทุจูู ุงููุงูู

---

## ๐ ุงูุจููุฉ ุงููุชูุงููุฉ ุงูููุชุฑุญุฉ

```
src/
โโโ theory/              # ูุธุฑูุฉ ุงูููุธ ุงูููุฑุฏ โ
โ   โโโ phonetic_space/
โ   โโโ minimizers/
โ   โโโ proofs/
โ
โโโ syntax_theory/       # ูุธุฑูุฉ ุงูุชุฑููุจ โ
โ   โโโ structures/
โ   โโโ relations/
โ   โโโ operators/
โ   โโโ generators/
โ   โโโ minimizers/
โ   โโโ proofs/
โ
โโโ engines/             # ุงููุญุฑูุงุช 66 โ
โ   โโโ phonology/
โ   โโโ morphology/
โ   โโโ lexicon/
โ   โโโ syntax/
โ   โโโ rhetoric/
โ   โโโ generation/
โ
โโโ integrated/          # ุงูุชูุงูู ๐ง (ุงูุชุงูู)
    โโโ generator.py           # IntegratedGenerator
    โโโ energy.py              # E_total = E_phono + E_syn
    โโโ proofs.py              # ุงูุจุฑูุงู ุงูููุญุฏ
    โโโ examples.py            # ูู ุฌุฐุฑ ุฅูู ุฌููุฉ
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงูููุญุฏุฉ

| ุงููููุงุณ | ุงููููุฉ |
|---------|--------|
| **ุงููุธุฑูุงุช** | 2 (ุตูุชูุฉ + ุชุฑููุจูุฉ) |
| **ุงููููุงุช** | 24 (9 + 15) |
| **ุงูุฃุณุทุฑ** | ~4500 |
| **ุงูุจุฑุงููู** | 8 (3 + 5) |
| **ุงูุงุฎุชุจุงุฑุงุช** | 14 (7 + 7) |
| **ุงููุญุฑูุงุช** | 66 (ููุฌูุฏุฉ) |
| **ุงูุทุจูุงุช** | 6 (ุตูุชูุงุช โ ุชูููุฏ) |

---

## โจ ุงูุฎูุงุตุฉ

### โ ูุง ุชู ุฅูุฌุงุฒู
1. **ูุธุฑูุฉ ุงูููุธ ุงูููุฑุฏ**: ูู ุตูุช = arg min E_syll
2. **ูุธุฑูุฉ ุงูุชุฑููุจ**: ูู ุนูุงูุฉ = arg min E_syn
3. **ููุงุท ุงูุชูุงูู**: ูุญุฏุฏุฉ ููุถุญุฉ
4. **ุงูุจุฑุงููู**: 8 ูุจุฑููุงุช ูุญูุณุจุฉ
5. **ุงูุงุฎุชุจุงุฑุงุช**: 14/14 โ

### ๐ง ุงููุฑุญูุฉ ุงูุชุงููุฉ
1. ุชูููุฐ IntegratedGenerator
2. ุฑุจุท E_phono ูุน E_syn
3. ุชูููุฏ ูู ุฌุฐุฑ ุฅูู ุฌููุฉ ูุงููุฉ
4. ุงูุฃุณููุจ ูุงูููุงู

### ๐ฏ ุงูุฑุคูุฉ ุงูููุงุฆูุฉ
```
ุฌุฐุฑ (ู-ุช-ุจ) + ูุตุฏ (ุชุฑููุจ ูุนูู ูุชุนุฏู)
    โ
arg min E_total (phono + syn + rhetoric + context)
    โ
"ููุชูุจู ุฃูุญูููุฏู ุงูุฑููุณูุงููุฉู ููู ุงูุจูููุชู"
(ุฌููุฉ ูุงููุฉ ูุดูููุฉุ ูุญููุง ุตุญูุญุ ุฃุณููุจูุง ุจููุบ)
```

**ูุง ุฌุฏุงููุ ูุง ููุงุนุฏุ ููุท arg min E ูู ูู ุงููุณุชููุงุช**

---

*ุชู ุงูุชูุซูู ูู 2026-02-03*  
*ูุธุงู ุงูุชูุงูู ุงูููุญุฏ v1.0.0*
