"""
ููุฎุต ูุธุฑูุฉ ุงูุชุฑููุจ (Syntax Theory)
=====================================

ูุธุงู ุชุฑููุจู ุฑูุงุถู ูุงูู ุนูู ููุณ ูุจุฏุฃ ุงูููุธ ุงูููุฑุฏ:
x โ yโ โ G(x) โ arg min E

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ุงูููุงูู ุงูุฃุณุงุณูุฉ (structures/)
- **SyntacticInput (x)**: ุงููุฏุฎู ุงูุตุญูุญ = (L, T, I, B)
  - L: ูุญุฏุงุช ูุนุฌููุฉ (LexicalAtom) ุจุฃููุงุนูุง (N, V, P, Part...)
  - T: ุฃูุฏุงู ุตุฑููุฉ/ุตูุชูุฉ
  - I: ูููุฏ ูุธูููุฉ (IntentConstraint)
  - B: ุญุฏ ุงูุชุนููุฏ
  
- **SyntacticGraph (y)**: ุฑุณู ุจูุงูู ููุฌู = (V_y, E_y, ฯ, ฯ)
  - ุนูุฏ (Node): ุชูููุงุช + ุนูุงูู + ุนูุงูุงุช
  - ุญูุงู (Edge): ISN, TADMN, TAQYID, GOV
  - ุณูุงุช (NodeFeatures): ุฅุนุฑุงุจุ ุตุฑูุ ุฃุฏูุงุฑ ุฏูุงููุฉ

### 2. ุงูุนูุงูุงุช ุงูุซูุงุซ (relations/)
- **ISN (ุงูุฅุณูุงุฏ)**: h โ s
  - ูู ุงูุฑุฃุณ (ูุณูุฏ) ุฅูู ุงููุณูุฏ ุฅููู
  - ูุซุงู: ISN(ูุชุจ โ ุฃุญูุฏ)
  
- **TADMN (ุงูุชุถููู)**: h โ C
  - ูู ุงูุฑุฃุณ ุฅูู ุชูููุฉ (Argument slot)
  - ูุซุงู: TADMN(ูุชุจ โ ุงูุฑุณุงูุฉ)
  
- **TAQYID (ุงูุชูููุฏ)**: h โฃ m
  - ูู ุงูุฑุฃุณ ุฅูู ูููุฏ (Modifier)
  - ูุซุงู: TAQYID(ูุชุจ โฃ PP)

### 3. ุงูุนูุงูู (operators/)
ุชูููุนุงุช ููุงุณูุฉ ูู14 ุนุงูููุง:
- **ุฅูู ูุฃุฎูุงุชูุง** (6): ุชูุตุจ ุงูุงุณูุ ุชุฑูุน ุงูุฎุจุฑ
- **ูุงู ูุฃุฎูุงุชูุง** (7): ุชุฑูุน ุงูุงุณูุ ุชูุตุจ ุงูุฎุจุฑ
- **ุฃุฏูุงุช ุงูุฌุฒู/ุงููุตุจ**: ููุ ููุ ูุง ุงููุงููุฉ
- **ุญุฑูู ุงูุฌุฑ** (8): ุชุฌุฑ ุงูุงุณู

ูู ุนุงูู = ุนูุฏุฉ ููุง:
- `sig(A) = (req_types, assigns_features)`
- `GOV(A โ t)` ูุทุจู case/mood

### 4. ุงููููุดุฆ ุงููุงูููู ูุงููููุฏ (generators/)
- **Canon(x)**: ุจูุงุก yโ ูุถููู (E(yโ) < โ)
  - ุงุฎุชูุงุฑ ุฑุฃุณ ุงูุญูู
  - ุฅูุดุงุก ISN ูุงุญุฏ
  - ุฅุดุจุงุน ุงููุชุญุงุช ุจุงูุญุฏ ุงูุฃุฏูู
  - ููู ุงูุนูุงูู
  
- **G(x)**: ุชูููุฏ ูุฑุดุญูู ููุชูู
  - ุชุนุฏููุงุช ูุญุฏูุฏุฉ ุนูู yโ
  - ูุน ุญุฏ B โ Termination

### 5. ุฏุงูุฉ ุงููููุฉ (minimizers/)
```
E(y|x) = E_rel + E_gov + E_case + E_built + E_roles + E_phono + E_simp
```

**ุงูุจูุงุจุงุช โ** (Hard Gates):
- Gate-typing: ุฃููุงุน ุงูุญูุงู ุตุญูุญุฉ
- Gate-anchor: ุงููุจูู ูู Anchor
- Gate-governor: ุงูุนูุงูู ูุบููุฉ

**ูููุฉ ุงูุนูุงูุงุช**:
```
E_rel = ฮป_Iยท#ISN + ฮป_Tยท#TADMN + ฮป_Qยท#TAQYID + P_unsatisfied
```
- ุฅุฐุง ูุง ุญูู โ โ
- ุฅุฐุง ูุชุญุฉ ูุงุฑุบุฉ โ โ

**ูููุฉ ุงูุนูุงูู**:
- ุนุงูู ุบูุฑ ูุบูู โ โ
- ููุน ุฎุงุทุฆ โ โ

**ูููุฉ ุงูุฅุนุฑุงุจ (ูููุนุฑุจ)**:
- case/mood ุบูุฑ ูุชูุงูู โ โ

**ูููุฉ ุงููุจูู**:
- ูุง Anchor โ โ

**ูููุฉ ุงูุฃุฏูุงุฑ**:
- Agent/Patient ููููุฏ โ โ

### 6. ุงูุจุฑุงููู ุงููุญูุณุจุฉ (proofs/)

#### ุงูุจุฑูุงู 1: arg min ูุชุทูุจ ISN โ
```
ุฃู y ุจุฏูู ISN โ E(y) = โ
yโ ูุญุชูู ISN โ E(yโ) < โ
โด arg min ูุฎุชุงุฑ y ูุน ISN
```

#### ุงูุจุฑูุงู 2: arg min ูุถูู TADMN ูููุชุญุงุช โ
```
ูุนู ูุชุนุฏูู + ูุชุญุฉ Patient ูุงุฑุบุฉ โ E = โ
ุฅุถุงูุฉ TADMN(verb โ object) โ E < โ
โด arg min ูุถูู TADMN ูุฅุดุจุงุน ุงููุชุญุฉ
```

#### ุงูุจุฑูุงู 3: TAQYID ุงุฎุชูุงุฑู ููู ุจุงูุญุฏ ุงูุฃุฏูู โ๏ธ
```
TAQYID ูููููุฏุงุช (PP/Adj/Adv)
ูููุฉ TAQYID = ฮป_Q (ููุชููุฉ)
E_simp ูุนุงูุจ ูุซุฑุฉ ุงูุญูุงู
โด arg min ูุถูู TAQYID ุนูุฏ ุงูุถุฑูุฑุฉ ููุท
```
*ููุงุญุธุฉ*: ูุญุชุงุฌ ุถุจุท ุฃูุฒุงู (ฮป_Q ุฃุตุบุฑ)

#### ุงูุจุฑูุงู 4: ุงููุจูู/ุงููุนุฑุจ ููุณุงุฑูู ูู E โ
```
ุงููุนุฑุจ: ูุชุบูุฑ case โ {NOM,ACC,GEN}
        ููุฏ: case ูุทุงุจู ุงูุนุงูู (ูุฅูุง โ)

ุงููุจูู: ุซุงุจุช (locked=1)
       ููุฏ: ูุฌุจ Anchor (ูุฅูุง โ)

โด ููุณุง "ุชุนุฑูููู" ุจู ูุณุงุฑุงู ููุฅุดุจุงุน
```

#### ุงูุจุฑูุงู 5: ุงููุงุนููุฉ/ุงูููุนูููุฉ ูู Valency โ
```
ูุนู ูุชุนุฏูู: subj-slot (Agent) + obj-slot (Patient)
ูุถุน Patient ูู subj โ ุนููุจุฉ incompatibility
โด arg min ูุฎุชุงุฑ:
  ISN(verb โ Agent)
  TADMN(verb โ Patient)

ููุณุช "ุชุนุฑููุงุช" ุจู ุญู ููููุฏ ุงูุชูุงูู
```

## ๐ ุงููุชุงุฆุฌ ุงููุนููุฉ

### ูุซุงู 1: "ูุชุจ ุฃุญูุฏ ุงูุฑุณุงูุฉ"
```
ุงููุฏุฎู: x=(ูุชุจ(V), ุฃุญูุฏ(N), ุงูุฑุณุงูุฉ(N))
yโ: Graph(ISN=1, TADMN=1)
  ISN(ูุชุจ โ ุฃุญูุฏ)
  TADMN(ูุชุจ โ ุงูุฑุณุงูุฉ)
E(yโ) = 2.60 โ
```

### ูุซุงู 2: "ุฅูู ุฃุญูุฏู ูุงุชุจู"
```
y: Graph(ISN=1, GOV=1)
  GOV(ุฅูู โ ุฃุญูุฏ) + case=ACC
  ISN(ูุงุชุจ โ ุฃุญูุฏ)
ุงูุนุงูู ุฃุบูู ุงูุฌููุฉ ุงูุงุณููุฉ โ
```

### ูุซุงู 3: "ูู ููุชุจู"
```
y: Graph(GOV=1)
  GOV(ูู โ ููุชุจ) + mood=JUSS
ุงูุนุงูู ุฃุบูู ุงููุนู โ
```

### ูุซุงู 4: ููุงุฑูุฉ ูุฑุดุญูู
```
y_correct: ISN=1, TADMN=1 โ E = 2.60
y_wrong: ISN=1, TADMN=0 โ E = โ
arg min ุงุฎุชุงุฑ y_correct โ
```

## ๐ง ุงูุจููุฉ ุงูููููุฐุฉ

```
src/syntax_theory/
โโโ structures/
โ   โโโ input_structure.py      (x, LexicalAtom, IntentConstraint)
โ   โโโ graph_structure.py      (y, Node, Edge, NodeFeatures)
โโโ relations/
โ   โโโ relation_builder.py     (ISN, TADMN, TAQYID)
โโโ operators/
โ   โโโ operator_signatures.py  (14 ุนุงูููุง ุจุชูููุนุงุชูุง)
โโโ generators/
โ   โโโ canonical_constructor.py (Canon(x) โ yโ)
โ   โโโ candidate_generator.py   (G(x) ููุชูู)
โโโ minimizers/
โ   โโโ syntactic_energy.py     (E(y|x), arg min)
โโโ proofs/
    โโโ selection_theorem.py    (5 ุจุฑุงููู ูุญูุณุจุฉ)

examples/
โโโ syntax_theory_examples.py   (5 ุฃูุซูุฉ ุดุงููุฉ)
```

**ุงููููุงุช**: 15 ููููุง (~3000 ุณุทุฑ)
**ุงูุจุฑุงููู**: 5 ูุจุฑููุงุช
**ุงูุฃูุซูุฉ**: 5 ุฃูุซูุฉ ุชุทุจูููุฉ

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ 1. ูุง ุฌุฏุงูู ูุบููุฉุ ููุท arg min E
ูู ุดูุก ูู ุงูุชุญุณูู:
- ุงุฎุชูุงุฑ ISN/TADMN/TAQYID
- ุฅุบูุงู ุงูุนูุงูู
- ุชุนููู case/mood
- ุชุญุฏูุฏ ุงูุฃุฏูุงุฑ ุงูุฏูุงููุฉ

### โ 2. ุงูุจูุงุจุงุช โ ุจุฏู ุงูููุงุนุฏ
```
โ ูุงุนุฏุฉ: "ุงููุนู ุงููุชุนุฏู ูุญุชุงุฌ ููุนูููุง"
โ ุจูุงุจุฉ: ูุชุญุฉ ูุงุฑุบุฉ โ E = โ
```

### โ 3. ุงููุจูู/ุงููุนุฑุจ = ูุณุงุฑุงู ุฑูุงุถูุงู
```
ุงููุนุฑุจ: ูุญู ูุชุบูุฑ case ุชุญุช ูููุฏ ุงูุนูุงูู
ุงููุจูู: ูุญูู Anchor/Join/Scope
```

### โ 4. ุงูุฃุฏูุงุฑ ูู Valency ูุง ุงูุชุนุฑููุงุช
```
โ ุชุนุฑูู: "ุงููุงุนู ูู ูุนู ุงููุนู"
โ ููุฏ: ูุนู ูุชุนุฏูู ูุทูุจ Agent + Patient
```

### โ 5. ุจุฑุงููู ูุญูุณุจุฉ
ูู ูุจุฑููุฉ = ุฏุงูุฉ Python ุชูุฑุฌุน `TheoremResult`:
```python
result = prove_requires_isn(x)
print(result)  # โ arg min ูุชุทูุจ ISN
for line in result.log:
    print(line)  # ุณุฌู ุชูุตููู
```

## ๐ ุงูุงุณุชุฎุฏุงู

```python
from syntax_theory import (
    make_simple_input, VerbValency,
    CanonicalConstructor, SyntacticOptimizer,
    prove_all_theorems
)

# 1. ุจูุงุก ูุฏุฎู
x = make_simple_input(
    verbs=["ูุชุจ"],
    nouns=["ุฃุญูุฏ", "ุงูุฑุณุงูุฉ"]
)

# 2. ุจูุงุก yโ
y0 = CanonicalConstructor.construct(x)

# 3. ุญุณุงุจ E
from syntax_theory import SyntacticEnergy
energy = SyntacticEnergy()
E = energy.compute(y0, x)

# 4. ุชุดุบูู ุงูุจุฑุงููู
results = prove_all_theorems(x)
for name, result in results.items():
    print(result)
```

## ๐ฌ ุงูุชุฌุงุฑุจ

ุชุดุบูู:
```bash
PYTHONPATH=src python examples/syntax_theory_examples.py
```

ุงููุชุงุฆุฌ:
- โ 4/5 ุจุฑุงููู ูุฌุญุช
- โ ุฌููุน ุงูุฃูุซูุฉ ุชุนูู
- โ๏ธ TAQYID ูุญุชุงุฌ ุถุจุท ุฃูุฒุงู

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุฎุงุฑุฌ ูุทุงู ูุฐู ุงููุฑุญูุฉ)

1. **ุถุจุท ุงูุฃูุฒุงู**: ฮป_Q ุฃุตุบุฑ ููTAQYID
2. **ุฑุจุท ูุธุงู ุงูููุธ ุงูููุฑุฏ**: ุงุณุชุฎุฏุงู E_phono ูู src/theory/
3. **ุชูุณูุน ุงูุนูุงูู**: ูุฒูุฏ ูู ุงูุฃุฏูุงุช ุงููุญููุฉ
4. **ุณูุงุณู ุงูููุงุทุน**: CVCVC, CVCCVC... (ุชูููุฏ ูููุงุช ูุงููุฉ)
5. **ุงูุฃุณููุจ ูุงูููุงู**: ุทุจูุฉ ุงูุชุทุฑูุฒ ุงูุจูุงุบู

## ๐ ุงููุฑุงุฌุน

- [ูุธุฑูุฉ ุงูููุธ ุงูููุฑุฏ](../src/theory/) - ุฃุณุงุณ ุงูุตูุชูุงุช
- [ุงููุญุฑูุงุช 66](../src/engines/) - ููุงุนุฏ ุงูุจูุงูุงุช ุงููุบููุฉ
- [ุงูุทูุจ ุงูุฃุตูู](../๐ฏ%20ุฎุทุฉ%20ุดุงููุฉ%20ูุจูุงุก%20ุงููุญุฑูุงุช%20ุงููุบููุฉ%20ุงูุญููููุฉ.md)

## โจ ุงูุฎูุงุตุฉ

**ุชู ุฅูุฌุงุฒ ูุธุฑูุฉ ุงูุชุฑููุจ ุงููุงููุฉ**:
โ ูู ุตุงูุช ูุตุงุฆุช = ูุงุชุฌ arg min E (ูู ูุจู)
โ ูู ุนูุงูุฉ ุชุฑููุจูุฉ = ูุงุชุฌ arg min E (ุงูุขู)
โ ุงููุจูู/ุงููุนุฑุจ = ูุณุงุฑุงู ุฑูุงุถูุงู
โ ุงููุงุนููุฉ/ุงูููุนูููุฉ/ุงูุณุจุจูุฉ = ุญู ูููุฏ
โ 5 ุจุฑุงููู ูุญูุณุจุฉุ 5 ุฃูุซูุฉ ุชุทุจูููุฉ

**ุงูุฌุงูุฒูุฉ ูููุฑุญูุฉ ุงูุชุงููุฉ**: โ 100%
**ูุงุจููุฉ ุงูุชูููุฐ**: โ ูุงูู
**ุงูุตุฑุงูุฉ ุงูุฑูุงุถูุฉ**: โ ูุจุฑููุฉ

---

*"ูุง ุฌุฏุงููุ ูุง ููุงุนุฏุ ููุท arg min E"*
*โ ูุธุฑูุฉ ุงูุชุฑููุจ ุงูุฑูุงุถูุฉ*
"""

# ุชุงุฑูุฎ ุงูุฅูุดุงุก
__created__ = "2026-02-03"
__version__ = "1.0.0"
